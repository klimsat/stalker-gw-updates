[logic]
active = sr_idle@wait

[sr_idle@wait]
on_game_timer = 30 | {-mar_smart_terrain_secret_base_outer_door_open -mar_smart_terrain_secret_base_inner_door_open =actor_in_zone(mar_smart_terrain_secret_base_sr_steam)} sr_idle@wait_play
;on_info = {=surge_started} sr_idle@open_doors %+mar_smart_terrain_secret_base_forced_open%

[sr_idle@wait_play]
on_info = sr_idle@wait %=play_sound(mar_smart_terrain_secret_base_steam) =play_particle_on_path(damage_fx\smoke:mar_smart_terrain_secret_base_steam_1) =play_particle_on_path(damage_fx\smoke:mar_smart_terrain_secret_base_steam_2)%

[sr_idle@open_doors]
on_game_timer = 30 | {-mar_smart_terrain_secret_base_outer_door_open -mar_smart_terrain_secret_base_inner_door_open =actor_in_zone(mar_smart_terrain_secret_base_sr_steam)} sr_idle@open_play
;on_info = {+mar_smart_terrain_secret_base_forced_open =squads_in_zone_b41} %-mar_smart_terrain_secret_base_forced_open%
on_info2 = {=surge_complete} sr_idle@wait_out

[sr_idle@open_play]
on_info = sr_idle@open_doors %=play_sound(mar_smart_terrain_secret_base_steam) =play_particle_on_path(damage_fx\smoke:mar_smart_terrain_secret_base_steam_1) =play_particle_on_path(damage_fx\smoke:mar_smart_terrain_secret_base_steam_2)%

[sr_idle@wait_out]
on_game_timer = 30 | {-mar_smart_terrain_secret_base_outer_door_open -mar_smart_terrain_secret_base_inner_door_open =actor_in_zone(mar_smart_terrain_secret_base_sr_steam)} sr_idle@wait_out_play
;on_game_timer2 = 300 | sr_idle@wait %-mar_smart_terrain_secret_base_forced_open%

[sr_idle@wait_out_play]
on_info = sr_idle@wait_out %=play_sound(mar_smart_terrain_secret_base_steam) =play_particle_on_path(damage_fx\smoke:mar_smart_terrain_secret_base_steam_1) =play_particle_on_path(damage_fx\smoke:mar_smart_terrain_secret_base_steam_2)%
